{% extends 'layout_admin.html.twig' %}

{% block stylesheets %}
	{{ parent() }}
	{{ encore_entry_link_tags('command') }}
{% endblock %}

{% block body %}
	<div class="d-flex justify-content-end m-5">
		{{ form_start(form) }}
		<div class="form-group fg--search">
			{{ form_row(form.search, {'attr': {'class': 'form-control me-2 bg-secondary'}}) }}
			<button class="fa fa-search" type="submit">
				{{ include('/component/_magnifying_glass.html.twig') }}
			</button>
		</div>
		{{ form_end(form) }}
	</div>
	<div class="container">
		{% for command in commands %}
			<div class="card col-12 bg-secondary mb-5 mt-4 p-3">
				<div class="row">
					<div class="col-1">
						<div class="col-12 d-flex justify-content-center">
							<strong>N°</strong>
						</div>
						<div class="mt-3 d-flex justify-content-center">
							<strong>{{ command.id }}</strong>
						</div>
					</div>
					<div class="col-3">
						<div class="col-12 d-flex justify-content-center">
							<strong>RÉCAPITULATIF</strong>
						</div>
						<div class="mt-3 d-flex justify-content-center">
							<p>{{ command.projectName }}</p>
						</div>
					</div>
					<div class="col-2">
						<div class="col-12 d-flex justify-content-center">
							<strong>DATE</strong>
						</div>
						<div class="mt-3 d-flex justify-content-center">
							<strong>{{ command.createdAt|date('d/m/Y') }}</strong>
						</div>
					</div>
					<div class="col-2">
						<div class="col-12 d-flex justify-content-center">
							<strong>PRIX</strong>
						</div>
						<div class="mt-3 d-flex justify-content-center">
							<strong></strong>
						</div>
					</div>
					<div class="col-2">
						<div class="d-flex justify-content-center">
							<strong>STATUTS</strong>
						</div>
						<form method="post" action="{{ path('command_change_status', {'id': command.id}) }}">
							<div class="d-flex justify-content-center mt-3">
								<select class="status form-select bg-{{ command.status.color }}"  aria-label="Default select example" name="status" id="status">
									<option value="{{ command.status.name }}" disabled selected>{{ command.status.name }}</option>
									{% for one_status in status %}
										<option value="{{ one_status.id }}">{{ one_status.name }}</option>
									{% endfor %}
								</select>
							</div>
							<div class="d-flex justify-content-center mt-3">
								<input type="hidden" name="_token" value="{{ csrf_token('change_status' ~ command.id) }}">
								<button class="btn btn-light">Modifier</button>
							</div>
						</form>
					</div>
				</div>
				<div class="d-flex justify-content-center my-2">
					<div class="m-2">
						<a href="{{ path('pdf', {'id': command.id}) }}" class="btn btn-light">Impression cartes</a>
					</div>
					<div class="m-2">
						<a href="{{ path('backPdf', {'id': command.id}) }}" class="btn btn-light">Impression dos de carte</a>
					</div>
				</div>
			</div>
		{% else %}
			<h2>Aucune commande</h2>
		{% endfor %}
	</div> 
{% endblock %}
