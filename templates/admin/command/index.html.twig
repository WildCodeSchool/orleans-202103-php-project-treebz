{% extends 'layout_admin.html.twig' %}

{% block stylesheets %}
	{{ parent() }}
	{{ encore_entry_link_tags('command') }}
{% endblock %}

{% block body %}
	<div class="d-flex justify-content-end m-5">
		{{ form_start(form) }}
		<div class="form-group fg--search">
			{{ form_row(form.search, {'attr': {'class': 'form-control me-2 bg-secondary'}}) }}
			<button class="fa fa-search" type="submit">
				{{ include('/component/_magnifying_glass.html.twig') }}
			</button>
		</div>
		{{ form_end(form) }}
	</div>
	<div class="container">
		{% for command in commands %}
			<div class="card flex-row col-12 bg-secondary mb-5 mt-4 p-3">
				<div class="col-1">
					<div class="col-12 d-flex justify-content-center">
						<strong>N°</strong>
					</div>
					<div class="mt-3 d-flex justify-content-center">
						<strong>{{ command.id }}</strong>
					</div>
				</div>
				<div class="col-3">
					<div class="col-12 d-flex justify-content-center">
						<strong>RÉCAPITULATIF</strong>
					</div>
					<div class="mt-3 d-flex justify-content-center">
						<p>{{ command.projectName }}</p>
					</div>
				</div>
				<div class="col-2">
					<div class="col-12 d-flex justify-content-center">
						<strong>DATE</strong>
					</div>
					<div class="mt-3 d-flex justify-content-center">
						<strong>{{ command.createdAt }}</strong>
					</div>
				</div>
				<div class="col-2">
					<div class="col-12 d-flex justify-content-center">
						<strong>PRIX</strong>
					</div>
					<div class="mt-3 d-flex justify-content-center">
						<strong></strong>
					</div>
				</div>
				<div class="col-2">
					<div class="d-flex justify-content-center">
						<strong>STATUS</strong>
					</div>
					<div class="d-flex justify-content-center mt-3">
						<div class="{{ command.status.name }}-color btn" value="{{ command.status.id }}">
							<strong>{{ command.status.name }}</strong>
						</div>
					</div>
				</div>
				<div class="col-2">
					<form method="post" action="{{ path('command_change_status', {'id': command.id}) }}">
						<div class="d-flex justify-content-center">
							<select class="status" name="status" id="status">
								{% for one_status in status %}
									<option value="{{ one_status.id }}">{{ one_status.name }}</option>
								{% endfor %}
							</select>
						</div>
						<div class="d-flex justify-content-center mt-3">
							<input type="hidden" name="_token" value="{{ csrf_token('change_status' ~ command.id) }}">
							<button class="btn btn-light">Modifier</button>
						</div>
					</form>
				</div>
			</div>
		{% else %}
			<h2>Aucune commande</h2>
		{% endfor %}
	</div>
{% endblock %}
